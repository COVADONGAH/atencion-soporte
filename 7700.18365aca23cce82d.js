"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7700],{7700:(I,g,r)=>{r.r(g),r.d(g,{TechnicalSupportPageModule:()=>q});var f=r(9808),a=r(4182),i=r(5649),p=r(3515),l=r(655),v=r(7905);class Z{constructor(){this.toString=()=>`**Colaborador: ** ${this.colaborador}\n**Contacto: ** ${this.contacto}\n**Sede: ** ${this.sede}\n**Area: ** ${this.area}\n\n\n---\n\n**Problema: ** ${this.problema}\n>${this.multilineFormated(this.descripcion)}`,this.multilineFormated=n=>n.replaceAll(/\n\n/gi,"\n\n>")}deserialize(n){return Object.assign(this,n),this}}var b=r(9456),d=(()=>{return(t=d||(d={})).HCV="665771671c8e48c2e3f5afcd",t.HCC="665771671c8e48c2e3f5afdd",t.HCO="665771671c8e48c2e3f5afc9",t.GV="665771671c8e48c2e3f5afd1",d;var t})(),e=r(2096),T=r(520);let S=(()=>{class t{constructor(o){this.http=o,this.getSedes=()=>this.http.get("/assets/data/sedes.json").toPromise(),this.getAreas=()=>this.http.get("/assets/data/areas.json").toPromise()}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(T.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=r(7852),C=r(3646),y=r(4662);const k=[{path:"",component:(()=>{class t{constructor(o,s,m,u,x,z){this.alertController=o,this.dataJson=s,this.formBuilder=m,this.loadingController=u,this.router=x,this.trello=z,this.prepareTicket=()=>(new Z).deserialize(this.ticketForm.value),this.prepareCard=(c,h)=>(new v.Z).deserialize({name:`${this.folio}`,desc:c.toString(),idList:"665771641c8e48c2e3f5955a",idLabels:[h]}),this.getLabelId=c=>d[c],this.setFolio=c=>this.folio=`${this.getAcronym(c)} - ${(0,b.N)()}`,this.getAcronym=c=>c.split(/\s/).reduce((h,G)=>h+G.slice(0,1),"")}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.ticketForm=this.formBuilder.group({sede:["",a.kI.required],area:["",a.kI.required],colaborador:["",a.kI.required],contacto:["",a.kI.required],problema:["",a.kI.required],descripcion:["",a.kI.required]})})}ionViewWillEnter(){this.ticketForm.reset()}onClickSubmit(){return(0,l.mG)(this,void 0,void 0,function*(){this.ticket=this.prepareTicket(),this.setFolio(this.ticket.sede);const o=this.getAcronym(this.ticket.sede),s=this.getLabelId(o);this.card=this.prepareCard(this.ticket,s),localStorage.getItem("rol");const u=yield this.loadingController.create({message:"Generando ticket..."});yield u.present(),setTimeout(()=>(0,l.mG)(this,void 0,void 0,function*(){return yield this.trello.post(this.card).then(()=>this.showAlertSuccess()).catch(()=>this.showAlertDimiss()).finally(()=>u.dismiss())}),1e3)})}showAlertSuccess(){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Registro exitoso",message:`Su ticket ha sido registrado correctamente con el folio<br><br><center><strong>${this.folio}</strong></center>`,mode:"ios",buttons:[{text:"Nuevo reporte",id:"cancel-button",handler:()=>this.resetForm(!1)},{text:"Finalizar",id:"confirm-button",handler:()=>{this.resetForm(),this.router.navigate(["/"])}}]})).present()})}showAlertDimiss(){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Ha ocurrido un error",message:"Su ticket no ha sido registrado, por favor vuelva a intentarlo<br><br>Si el problema persiste contacte al administrador del portal",mode:"ios",buttons:["Aceptar"]})).present()})}resetForm(o=!0){this.ticketForm.reset(),o||this.ticketForm.patchValue({sede:this.ticket.sede,area:this.ticket.area,colaborador:this.ticket.colaborador,contacto:this.ticket.contacto})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(i.Br),e.Y36(S),e.Y36(a.qu),e.Y36(i.HT),e.Y36(p.F0),e.Y36(A.M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-technical-support"]],decls:49,vars:2,consts:[["no-border",""],[1,"cs-container-footer"],["fixed","",1,"ion-padding"],["novalidate","",1,"dataForm",3,"formGroup","ngSubmit"],["color","primary",1,"ion-text-left","ion-no-padding"],["position","floating"],["okText","Aceptar","cancelText","Cancelar","formControlName","sede","mode","ios"],["value","Hospital Covadonga C\xf3rdoba"],["value","Hospital Covadonga Orizaba"],["value","Hospital Covadonga Veracruz"],["value","Gabinete Veracruz"],["type","text","formControlName","area"],["type","text","formControlName","colaborador","placeholder","Nombre completo"],["type","text","formControlName","contacto","placeholder","N\xfamero de tel\xe9fono o correo electr\xf3nico"],["type","text","formControlName","problema"],["rows","7","formControlName","descripcion"],["expand","block","color","primary","type","submit","mode","ios",1,"ion-margin",3,"disabled"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header",0),e._UZ(1,"app-header"),e.qZA(),e.TgZ(2,"ion-content")(3,"div",1)(4,"ion-grid",2)(5,"ion-list")(6,"form",3),e.NdJ("ngSubmit",function(){return s.onClickSubmit()}),e.TgZ(7,"ion-label",4)(8,"h1")(9,"strong"),e._uU(10,"Solicitar soporte t\xe9cnico"),e.qZA()(),e.TgZ(11,"p"),e._uU(12,"Si tienes alg\xfan problema con tu equipo de c\xf3mputo, uso del sistema, inconvenientes de red o temas relacionados, utiliza este espacio para levantar un ticket y recibir el apoyo de un personal del \xe1rea de sistemas."),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"ion-item")(15,"ion-label",5),e._uU(16,"Sede"),e.qZA(),e.TgZ(17,"ion-select",6)(18,"ion-select-option",7),e._uU(19,"Hospital C\xf3rdoba"),e.qZA(),e.TgZ(20,"ion-select-option",8),e._uU(21,"Hospital Orizaba"),e.qZA(),e.TgZ(22,"ion-select-option",9),e._uU(23,"Hospital Veracruz"),e.qZA(),e.TgZ(24,"ion-select-option",10),e._uU(25,"Gabinete Veracruz"),e.qZA()()(),e.TgZ(26,"ion-item")(27,"ion-label",5),e._uU(28,"Area"),e.qZA(),e._UZ(29,"ion-input",11),e.qZA(),e.TgZ(30,"ion-item")(31,"ion-label",5),e._uU(32,"Colaborador"),e.qZA(),e._UZ(33,"ion-input",12),e.qZA(),e.TgZ(34,"ion-item")(35,"ion-label",5),e._uU(36,"Contacto"),e.qZA(),e._UZ(37,"ion-input",13),e.qZA(),e.TgZ(38,"ion-item")(39,"ion-label",5),e._uU(40,"Problema"),e.qZA(),e._UZ(41,"ion-input",14),e.qZA(),e.TgZ(42,"ion-item")(43,"ion-label",5),e._uU(44,"Descripci\xf3n"),e.qZA(),e._UZ(45,"ion-textarea",15),e.qZA(),e.TgZ(46,"ion-button",16),e._uU(47," Enviar "),e.qZA()()()(),e._UZ(48,"app-footer"),e.qZA()()),2&o&&(e.xp6(6),e.Q6J("formGroup",s.ticketForm),e.xp6(40),e.Q6J("disabled",s.ticketForm.invalid))},directives:[i.Gu,C.G,i.W2,i.jY,i.q_,a._Y,a.JL,a.sg,i.Q$,i.Ie,i.t9,i.QI,a.JJ,a.u,i.n0,i.pK,i.j9,i.g2,i.YG,y.c],styles:[".dataForm[_ngcontent-%COMP%]{max-width:768px;margin:24px auto auto}"]}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(k)],p.Bz]}),t})();var P=r(5642);let q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[f.ez,P.K,a.u5,i.Pc,U,a.UX]]}),t})()}}]);