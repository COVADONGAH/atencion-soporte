"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8747],{8747:(I,u,r)=>{r.r(u),r.d(u,{TechnicalSupportPageModule:()=>P});var m=r(9808),a=r(4182),i=r(5649),d=r(3515),l=r(655),h=r(7905);class g{constructor(){this.toString=()=>`**Colaborador: ** ${this.idColaborador}\n**Sede: ** ${this.sede}\n\n\n---\n\n**Problema: ** ${this.problema}\n>${this.multilineFormated(this.descripcion)}`,this.multilineFormated=n=>n.replaceAll(/\n\n/gi,"\n\n>")}deserialize(n){return Object.assign(this,n),this}}var f=r(9456),t=r(2096),v=r(520);let S=(()=>{class e{constructor(o){this.http=o,this.getSedes=()=>this.http.get("/assets/data/sedes.json").toPromise(),this.getAreas=()=>this.http.get("/assets/data/areas.json").toPromise()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(v.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=r(7852),b=r(3646),Z=r(4662);const A=[{path:"",component:(()=>{class e{constructor(o,s,p,k,U,z){this.alertController=o,this.dataJson=s,this.formBuilder=p,this.loadingController=k,this.router=U,this.trello=z,this.prepareTicket=()=>(new g).deserialize(this.ticketForm.value),this.prepareCard=c=>(new h.Z).deserialize({name:`${this.folio}`,desc:c.toString(),idList:"6271f680f0e03c5af0319ec8"}),this.setFolio=c=>this.folio=`${this.getAcronym(c)} - ${(0,f.N)()}`,this.getAcronym=c=>c.split(/\s/).reduce((G,x)=>G+x.slice(0,1),"")}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.ticketForm=this.formBuilder.group({sede:["",a.kI.required],idColaborador:["",a.kI.required],problema:["",a.kI.required],descripcion:["",a.kI.required]})})}ionViewWillEnter(){this.ticketForm.reset()}onClickSubmit(){return(0,l.mG)(this,void 0,void 0,function*(){this.ticket=this.prepareTicket(),this.setFolio(this.ticket.sede),this.card=this.prepareCard(this.ticket),localStorage.getItem("rol");const s=yield this.loadingController.create({message:"Generando ticket..."});yield s.present(),setTimeout(()=>(0,l.mG)(this,void 0,void 0,function*(){return yield this.trello.post(this.card).then(()=>this.showAlertSuccess()).catch(()=>this.showAlertDimiss()).finally(()=>s.dismiss())}),1e3)})}showAlertSuccess(){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Registro exitoso",message:`Su ticket ha sido registrado correctamente con el folio<br><br><center><strong>${this.folio}</strong></center>`,mode:"ios",buttons:[{text:"Nuevo reporte",id:"cancel-button",handler:()=>this.resetForm(!1)},{text:"Finalizar",id:"confirm-button",handler:()=>{this.resetForm(),this.router.navigate(["/"])}}]})).present()})}showAlertDimiss(){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Ha ocurrido un error",message:"Su ticket no ha sido registrado, por favor vuelva a intentarlo<br><br>Si el problema persiste contacte al administrador del portal",mode:"ios",buttons:["Aceptar"]})).present()})}resetForm(o=!0){this.ticketForm.reset(),o||this.ticketForm.patchValue({sede:this.ticket.sede,idColaborador:this.ticket.idColaborador})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(i.Br),t.Y36(S),t.Y36(a.qu),t.Y36(i.HT),t.Y36(d.F0),t.Y36(T.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-technical-support"]],decls:41,vars:2,consts:[["no-border",""],[1,"cs-container-footer"],["fixed","",1,"ion-padding"],["novalidate","",1,"dataForm",3,"formGroup","ngSubmit"],["color","primary",1,"ion-text-left","ion-no-padding"],["position","floating"],["okText","Aceptar","cancelText","Cancelar","formControlName","sede","mode","ios"],["value","Hospital Covadonga C\xf3rdoba"],["value","Hospital Covadonga Orizaba"],["value","Hospital Covadonga Veracruz"],["value","Gabinete Veracruz"],["type","text","formControlName","idColaborador"],["type","text","formControlName","problema"],["rows","7","formControlName","descripcion"],["expand","block","color","primary","type","submit","mode","ios",1,"ion-margin",3,"disabled"]],template:function(o,s){1&o&&(t.TgZ(0,"ion-header",0),t._UZ(1,"app-header"),t.qZA(),t.TgZ(2,"ion-content")(3,"div",1)(4,"ion-grid",2)(5,"ion-list")(6,"form",3),t.NdJ("ngSubmit",function(){return s.onClickSubmit()}),t.TgZ(7,"ion-label",4)(8,"h1")(9,"strong"),t._uU(10,"Solicitar soporte t\xe9cnico"),t.qZA()(),t.TgZ(11,"p"),t._uU(12,"Si tienes alg\xfan problema con tu equipo de c\xf3mputo, uso del sistema, inconvenientes de red o temas relacionados, utiliza este espacio para levantar un ticket y recibir el apoyo de un personal del \xe1rea de sistemas."),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"ion-item")(15,"ion-label",5),t._uU(16,"Sede"),t.qZA(),t.TgZ(17,"ion-select",6)(18,"ion-select-option",7),t._uU(19,"Hospital C\xf3rdoba"),t.qZA(),t.TgZ(20,"ion-select-option",8),t._uU(21,"Hospital Orizaba"),t.qZA(),t.TgZ(22,"ion-select-option",9),t._uU(23,"Hospital Veracruz"),t.qZA(),t.TgZ(24,"ion-select-option",10),t._uU(25,"Gabinete Veracruz"),t.qZA()()(),t.TgZ(26,"ion-item")(27,"ion-label",5),t._uU(28,"C\xf3digo de colaborador"),t.qZA(),t._UZ(29,"ion-input",11),t.qZA(),t.TgZ(30,"ion-item")(31,"ion-label",5),t._uU(32,"Problema"),t.qZA(),t._UZ(33,"ion-input",12),t.qZA(),t.TgZ(34,"ion-item")(35,"ion-label",5),t._uU(36,"Descripci\xf3n"),t.qZA(),t._UZ(37,"ion-textarea",13),t.qZA(),t.TgZ(38,"ion-button",14),t._uU(39," Enviar "),t.qZA()()()(),t._UZ(40,"app-footer"),t.qZA()()),2&o&&(t.xp6(6),t.Q6J("formGroup",s.ticketForm),t.xp6(32),t.Q6J("disabled",s.ticketForm.invalid))},directives:[i.Gu,b.G,i.W2,i.jY,i.q_,a._Y,a.JL,a.sg,i.Q$,i.Ie,i.t9,i.QI,a.JJ,a.u,i.n0,i.pK,i.j9,i.g2,i.YG,Z.c],styles:[".dataForm[_ngcontent-%COMP%]{max-width:768px;margin:24px auto auto}"]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(A)],d.Bz]}),e})();var y=r(5642);let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,y.K,a.u5,i.Pc,F,a.UX]]}),e})()}}]);